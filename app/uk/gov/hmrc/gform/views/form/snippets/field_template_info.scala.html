@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.gform.sharedmodel.formtemplate.{ ExtraSmall, Small, Large, ExtraLarge, LinkCtx, InternalLink, InfoType, StandardInfo, LongInfo, ImportantInfo, BannerInfo, PdfLink, FormComponent, NoFormat }

@import uk.gov.hmrc.hmrcfrontend.views.Utils.nonEmptyStringOrDefault
@import uk.gov.hmrc.govukfrontend.views.html.components._

@import uk.gov.hmrc.gform.eval.smartstring.SmartStringEvaluator
@(fieldValue: FormComponent,
  infoType: InfoType,
  text: Html,
  classes: String
)(
  implicit
    messages: Messages,
    sse: SmartStringEvaluator)

  @link = {
    @sse(SmartString(LocalisedString(Map(LangADT.En -> "{0}")), LinkCtx(InternalLink.PrintAcknowledgementPdf) :: Nil), markDown = false)
  }

  @headerClass = {
    @fieldValue.labelSize match {
      case Some(ExtraSmall) => {govuk-heading-s}
      case Some(Small)      => {govuk-heading-s}
      case Some(Large)      => {govuk-heading-l}
      case Some(ExtraLarge) => {govuk-heading-xl}
      case _                => {govuk-heading-m}
    }
  }

  @infoType match {
    case StandardInfo => {
      @{
        val insetText = InsetText(None, classes, Map.empty, HtmlContent(text))
        new GovukInsetText()(insetText)
      }
    }

    case LongInfo => {
      @{
        val details = Details(None, open = false, classes, Map.empty, HtmlContent(sse(fieldValue.label, markDown = false)), HtmlContent(text))
        new GovukDetails()(details)
      }
    }

    case ImportantInfo => {
      @{
        val warningText = WarningText(Some(nonEmptyStringOrDefault(Some(messages("generic.Warning")), messages("govuk.warningText.iconFallbackText"))), classes, Map.empty, HtmlContent(text))
        new GovukWarningText()(warningText)
      }
    }

    case BannerInfo => {
      @{
        val panel = Panel(1, classes, Map.empty, HtmlContent(sse(fieldValue.label, markDown = false)), HtmlContent(text))
        new GovukPanel()(panel)
      }
    }

    case NoFormat => {
      <div class="govuk-body govuk-!-font-size-19">
        @text
      </div>
    }

    case PdfLink => {
      <div class="govuk-body govuk-!-font-size-19">
        <section class='pdf-link govuk-!-display-none-print'>
          <div class='pdf-link__thumbnail'>
            <a aria-hidden='true' class='govuk-link' href='@link' tabindex='-1' target='_blank'>
              <svg class='pdf-link__thumbnail-image' viewBox="0 0 99 140">
                <path d='M12,59h9v9h-9v-9ZM30,77v9h39v-9H30ZM30,104h57v-9H30v9ZM30,122h48v-9H30v9ZM12,86h9v-9h-9v9ZM12,122h9v-9h-9v9ZM12,104h9v-9h-9v9ZM30,68h57v-9H30v9ZM35.2,21c-.3-.2-.6-.4-1-.5s-.8-.2-1.3-.2h-2.6v5.5h2.6c.5,0,1,0,1.3-.2s.7-.3,1-.5c.3-.2.5-.5.7-.8s.2-.7.2-1.1h0c0-.5,0-.9-.2-1.2-.2-.3-.4-.6-.7-.8h0ZM52.4,21.9c-.4-.5-1-.9-1.6-1.1-.7-.3-1.5-.4-2.4-.4h-2.7v11.5h2.7c.9,0,1.7-.1,2.4-.4s1.2-.7,1.6-1.1c.4-.5.7-1.1.9-1.7.2-.7.3-1.4.3-2.1v-.7c0-.8,0-1.5-.3-2.1-.2-.6-.5-1.2-.9-1.7h0ZM87,12v27H12V12h75ZM39.8,23c0-.9-.1-1.6-.4-2.4-.3-.7-.7-1.4-1.2-1.9-.5-.5-1.2-1-1.9-1.2-.8-.3-1.6-.5-2.5-.5h-7.2v17.9h3.6v-6h3.2c.9,0,1.8-.1,2.6-.5.8-.3,1.4-.7,2-1.2.5-.5,1-1.2,1.3-1.9.3-.7.5-1.5.5-2.4h0ZM57.4,26c0-1.3-.2-2.6-.5-3.7s-.9-2-1.6-2.8c-.7-.8-1.6-1.4-2.7-1.8-1.1-.4-2.3-.6-3.8-.6h-6.6v17.9h6.6c1.5,0,2.7-.2,3.8-.6,1.1-.4,2-1,2.7-1.8.7-.8,1.3-1.7,1.6-2.8.4-1.1.5-2.3.5-3.7h0ZM72.4,17.1h-12.1v17.9h3.6v-7.5h7.8v-3.3h-7.8v-3.8h8.4s0-3.3,0-3.3Z'></path>
              </svg>
            </a>
          </div>
          <div class='pdf-link__details'>
            <h2 class='@headerClass'>
              <a class='govuk-link' href='@link' target="_blank">
                @sse(fieldValue.label, markDown = false)
              </a>
            </h2>
            @text
          </div>
        </section>
      </div>
    }
  }
