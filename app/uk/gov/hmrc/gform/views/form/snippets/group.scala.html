@import uk.gov.hmrc.gform.sharedmodel.form._
@import uk.gov.hmrc.gform.sharedmodel.formtemplate._
@import uk.gov.hmrc.gform.models._
@import uk.gov.hmrc.play.views.html.helpers._
@import views.html.helper.CSRF
@import scala.concurrent.Future
@import uk.gov.hmrc.gform.service.LabelHelper
@import uk.gov.hmrc.gform.sharedmodel.formtemplate.Group
@import uk.gov.hmrc.gform.sharedmodel.formtemplate.Orientation
@import uk.gov.hmrc.gform.sharedmodel.formtemplate.Horizontal
@import uk.gov.hmrc.gform.sharedmodel.formtemplate.FormComponent
@import uk.gov.hmrc.gform.views.html._


@(fieldValue: FormComponent, groupField: Group, snippets: List[Html], orientation: Orientation, disableAddButton: Boolean, index: Int)

@repeatCount = @{groupField.repeatsMin.getOrElse(0)}

<div class="form-group">
  <h2 class="heading-small heading-section">
    @if(!groupField.repeatsMax.isDefined) {
      @localisation(LabelHelper.buildRepeatingLabel(fieldValue, index))
    } else {
      @localisation(fieldValue.label)
    }
  </h2>

  <div class="@if(groupField.repeatsMax.isDefined && repeatCount > 0 && fieldValue.label.nonEmpty) {divider--top}">
      @{
         snippets
      }
  </div>

  @if(groupField.repeatsMax.isDefined && !disableAddButton) {
    <button
      type="submit"
      class="button button--link soft--left repeating-section--remove"
      name="save"
      value="AddGroup-@fieldValue.id">
      @localisation(groupField.repeatAddAnotherText.getOrElse("Add another"))
    </button>
  }
</div>
