@import uk.gov.hmrc.gform.models.components.FieldValue
@import uk.gov.hmrc.gform.models.FormFieldValidationResult
@import uk.gov.hmrc.play.views.html.helpers._
@import uk.gov.hmrc.gform.models.ComponentField

@(international: Boolean, fieldValue: FieldValue, validationResult: Option[FormFieldValidationResult])

@safeId(id: String) = @{
  fieldValue.id.withJSSafeSuffix(id).toString
}

@if(international) {
  <div class="form-group">
      <fieldset>
          <legend class="form-label">
              Is the address based in the UK?
          </legend>

          <div class="inline">
              <label for="address-international-yes" class="block-label" data-target="address-local">
                  <input
                  id="address-international-yes"
                  type="radio"
                  name="@safeId("uk")"
                  value="true"
                  aria-controls="address-local"
                  aria-expanded="true"
                  @if(validationResult.map(_.getCurrentValue(safeId("uk"))) != Some("false")) {
                      checked
                  }
                  />
                  Yes
              </label>

              <label for="address-international-no" class="block-label" data-target="address-international">
                  <input
                  id="address-international-no"
                  type="radio"
                  name="@safeId("uk")"
                  value="false"
                  aria-controls="address-international"
                  aria-expanded="false"
                  @if(validationResult.map(_.getCurrentValue(safeId("uk"))) == Some("false")) {
                      checked
                  }
                  />
                  No
              </label>
          </div>
      </fieldset>
  </div>
} else {
  <input type="hidden" name="@safeId("uk")" id="@safeId("uk")" value="true" />
}

<div class="@if(validationResult.map(_.isOk).contains(false)) { form-field-group--error }">
    <fieldset>
        <legend class="h3-heading">@localisation(fieldValue.label)</legend>
        @if(fieldValue.helpText) {
        <div class="form-field--hint">@localisation(fieldValue.helpText.getOrElse(""))</div>
        }

        @errorInline(fieldValue.id.value, "Please enter your address", Seq(""))

        <div class="form-group-compound">
            <label class="form-label" for="@safeId("street1")">Address 1</label>

            <input type="text"
                   class="input--medium"
                   name="@safeId("street1")"
                   id="@safeId("street1")"
                   value="@validationResult.map(_.getCurrentValue(safeId("street1"))).getOrElse("")" />
        </div>

        <div class="form-group-compound">
            <label class="form-label" for="@safeId("street2")">Address 2 (optional)</label>

            <input type="text"
                   class="input--medium"
                   name="@safeId("street2")"
                   id="@safeId("street2")"
                   value="@validationResult.map(_.getCurrentValue(safeId("street2"))).getOrElse("")" />
        </div>

        <div class="form-group-related">
            <label class="form-label" for="@safeId("street3")">Address 3 (optional)</label>

            <input type="text"
                   class="input--medium"
                   name="@safeId("street3")"
                   id="@safeId("street3")"
                   value="@validationResult.map(_.getCurrentValue(safeId("street3"))).getOrElse("")" />
        </div>

        <div class="form-field-group">
            <label class="form-label" for="@safeId("town")">Town</label>

            <input type="text"
                   class="input--medium"
                   name="@safeId("town")"
                   id="@safeId("town")"
                   value="@validationResult.map(_.getCurrentValue(safeId("town"))).getOrElse("")" />
        </div>

        <div class="form-field-group">
            <label class="form-label" for="@safeId("county")">Address 4 (optional)</label>

            <input type="text"
                   class="input--medium"
                   name="@safeId("county")"
                   id="@safeId("county")"
                   value="@validationResult.map(_.getCurrentValue(safeId("county"))).getOrElse("")" />
        </div>

        @if(international) {
        <div id="address-local">
          <div class="form-group">
            <label class="form-label" for="@safeId("postcode")">Postcode</label>

            <input type="text"
                   class="input--small"
                   name="@safeId("postcode")"
                   id="@safeId("postcode")"
                   value="@validationResult.map(_.getCurrentValue(safeId("postcode"))).getOrElse("")" />
          </div>
        </div>

        <div id="address-international">
          <div class="form-group">
            <label class="form-label" for="@safeId("country")">Country</label>

            <input type="text"
                   name="@safeId("country")"
                   id="@safeId("country")"
                   value="@validationResult.map(_.getCurrentValue(safeId("country"))).getOrElse("")" />
          </div>
        </div>
        } else {
          <div class="form-group">
            <label class="form-label" for="@safeId("postcode")">Postcode</label>

            <input type="text"
                   class="input--small"
                   name="@safeId("postcode")"
                   id="@safeId("postcode")"
                   value="@validationResult.map(_.getCurrentValue(safeId("postcode"))).getOrElse("")" />

            <input type="hidden"
                   name="@safeId("country")"
                   id="@safeId("country")"
                   value="" />
          </div>
        }

        <div class="form-field-group">
            <label class="form-label" for="phone-number">Phone number</label>

            <input type="text"
            class="input--medium"
            name="phone-number"
            id="phone-number"
            value="" />
        </div>
    </fieldset>
</div>
